### cluster (ุชุดุบูู ุนุฏุฉ ุนูููุงุช Node.js ูุชูุงุฒูุฉ)
**ุงููุตู**:
ููุฏููู cluster ูู Node.js ููุณุชุฎุฏู ูุชุดุบูู ุนุฏุฉ ุนูููุงุช Node.js (workers) ุนูู ููุณ ุงูุฎุงุฏู ููุงุณุชูุงุฏุฉ ูู ุฌููุน ุฃูููุฉ ุงููุนุงูุฌ (CPU Cores). ูุณูุญ ุจุชูุฒูุน ุงูุญูู ุนูู ุฃูุซุฑ ูู ุนูููุฉุ ููุง ูุญุณู ุงูุฃุฏุงุก ูู ุชุทุจููุงุช ุงูุฎูุงุฏู ุนุงููุฉ ุงูุถุบุท.

#### ุฌููุน ุงูุฏูุงู ูุงูุฎุตุงุฆุต ุบูุฑ ุงูููููุฉ:

```javascript
// ุงูุชุญูู ูู ููุน ุงูุนูููุฉ
cluster.isPrimary // true ุฅุฐุง ูุงูุช ุงูุนูููุฉ ุงูุฃุณุงุณูุฉ (master)
cluster.isWorker  // true ุฅุฐุง ูุงูุช ุงูุนูููุฉ ุนุงูู (worker)

// ุฅูุดุงุก ุนูููุงุช ูุฑุนูุฉ (workers)
cluster.fork([env])
// ุงูุจุงุฑุงูุชุฑุณ:
// - env: (object) ูุชุบูุฑุงุช ุงูุจูุฆุฉ ููุนูููุฉ ุงููุฑุนูุฉ (ุงุฎุชูุงุฑู)
// ูุซุงู:
const cluster = require('node:cluster');
if (cluster.isPrimary) {
  cluster.fork({ WORKER_TYPE: 'api' });
}

// ุงููุตูู ุฅูู ุฌููุน ุงูุนูุงู
cluster.workers // ูุงุฆู ูุญุชูู ุนูู ุฌููุน ุงูุนูุงู ุงูุญุงูููู (worker.id => worker)

// ุงูุงุณุชูุงุน ูุฃุญุฏุงุซ ุงูุนูุงู
cluster.on('exit', (worker, code, signal) => {
  console.log(`ุงูุนุงูู ${worker.process.pid} ุฎุฑุฌ`);
});
cluster.on('online', (worker) => {
  console.log(`ุงูุนุงูู ${worker.process.pid} ุฌุงูุฒ`);
});

// ุฅุนุฏุงุฏ ุฎุตุงุฆุต ุงูููุณุชุฑ
cluster.setupPrimary([settings])
// ุงูุจุงุฑุงูุชุฑุณ:
// - settings: (object) ุฅุนุฏุงุฏุงุช ูุซู exec, args, silent, stdio
// ูุซุงู:
cluster.setupPrimary({ exec: 'worker.js', args: ['--mode', 'prod'] });

// ุฎุตุงุฆุต ูููุฉ:
cluster.settings // ุฅุนุฏุงุฏุงุช ุงูููุณุชุฑ ุงูุญุงููุฉ
cluster.schedulingPolicy // ุณูุงุณุฉ ุชูุฒูุน ุงูุงุชุตุงูุงุช (ุงูุชุฑุงุถู: round-robin)

// ุงูุนุงูู ุงูุญุงูู (ุฏุงุฎู worker ููุท)
cluster.worker // ูุงุฆู worker ุงูุญุงูู

// ุฅุฑุณุงู ุฑุณุงูุฉ ุจูู ุงูุนูููุงุช
worker.send(message[, sendHandle[, options]][, callback])
// ุงูุจุงุฑุงูุชุฑุณ:
// - message: (object) ุงูุฑุณุงูุฉ
// - sendHandle: (server/socket) ููุจุถ ููููู (ุงุฎุชูุงุฑู)
// - options: (object) ุฎูุงุฑุงุช ุฅุถุงููุฉ
// - callback: (function) ุฏุงูุฉ ุจุนุฏ ุงูุฅุฑุณุงู
// ูุซุงู:
if (cluster.isWorker) {
  process.on('message', (msg) => {
    console.log('ุฑุณุงูุฉ ูู ุงููุงุณุชุฑ:', msg);
  });
  process.send({ ready: true });
}

// ุฅููุงุก ุนุงูู
worker.kill([signal])
// ุงูุจุงุฑุงูุชุฑุณ:
// - signal: (string) ุฅุดุงุฑุฉ ูุธุงู (ุงูุชุฑุงุถู SIGTERM)
// ูุซุงู:
worker.kill('SIGKILL');

// ูุทุน ุงูุงุชุตุงู ูุน ุงูุนุงูู
worker.disconnect()
// ูุซุงู:
worker.disconnect();

// ุฃุญุฏุงุซ ูููุฉ:
// - 'fork': ุนูุฏ ุฅูุดุงุก ุนุงูู ุฌุฏูุฏ
// - 'online': ุนูุฏ ุฌุงูุฒูุฉ ุงูุนุงูู
// - 'exit': ุนูุฏ ุฎุฑูุฌ ุงูุนุงูู
// - 'listening': ุนูุฏ ุจุฏุก ุงูุนุงูู ุงูุงุณุชูุงุน ุนูู ูููุฐ
// - 'message': ุนูุฏ ุงุณุชูุจุงู ุฑุณุงูุฉ

// ูุซุงู ุนููู ูุงูู:
const cluster = require('node:cluster');
const http = require('node:http');
const numCPUs = require('node:os').availableParallelism();

if (cluster.isPrimary) {
  for (let i = 0; i < numCPUs; i++) {
    cluster.fork();
  }
  cluster.on('exit', (worker, code, signal) => {
    console.log(`ุงูุนุงูู ${worker.process.pid} ุฎุฑุฌ`);
  });
} else {
  http.createServer((req, res) => {
    res.writeHead(200);
    res.end('hello world\n');
  }).listen(8000);
  console.log(`ุงูุนุงูู ${process.pid} ุจุฏุฃ`);
}
```

#### ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ:
- [โ] ุงูุงุนุชูุงุฏ ุนูู ุจูุงูุงุช ูู ุงูุฐุงูุฑุฉ ุจูู ุงูุนูุงู โ ุงูุญู: ุงุณุชุฎุฏู ูุงุนุฏุฉ ุจูุงูุงุช ุฃู Redis ููุดุงุฑูุฉ ุงูุญุงูุฉ.
- [โ] ุนุฏู ูุฑุงูุจุฉ ุฎุฑูุฌ ุงูุนูุงู ูุฅุนุงุฏุฉ ุชุดุบูููู โ ุงูุญู: ุงุณุชูุน ูุญุฏุซ 'exit' ูุฃุนุฏ ุชุดุบูู ุงูุนูุงู ุนูุฏ ุงูุญุงุฌุฉ.
- [โ] ุชุฌุงูู ุงุฎุชูุงูุงุช ูุธุงู ุงูุชุดุบูู (ูุซู ุชูุฒูุน ุงูุงุชุตุงูุงุช ุนูู ูููุฏูุฒ) โ ุงูุญู: ุงุฎุชุจุฑ ุงูููุฏ ุนูู ุฌููุน ุงูุฃูุธูุฉ ุงููุณุชูุฏูุฉ.

#### ูุตุงุฆุญ ุงูุฎุจุฑุงุก:
- [๐] ุงุณุชุฎุฏู cluster ููุงุณุชูุงุฏุฉ ุงููุตูู ูู ุฌููุน ุฃูููุฉ ุงููุนุงูุฌ ูู ุชุทุจููุงุช ุงูุฎูุงุฏู.
- [๐ก] ูุฒุน ุงูุฌูุณุงุช (sessions) ุนุจุฑ ูุงุนุฏุฉ ุจูุงูุงุช ุฃู Redis ุจุฏูุงู ูู ุงูุงุนุชูุงุฏ ุนูู ุงูุฐุงูุฑุฉ ุงููุญููุฉ.
- [โ๏ธ] ูุง ุชุนุชูุฏ ุนูู cluster ูู ุฅุฏุงุฑุฉ ุงูุชูุฌูู (routing) ุฃู ุชูุฑุงุฑ ุงูุจูุงูุงุชุ ุจู ุงุณุชุฎุฏูู ููุท ูุชูุฒูุน ุงูุญูู.
- [๐] ุฑุงูุจ ุงูุนูุงู ูุฃุนุฏ ุชุดุบูููู ุชููุงุฆูุงู ุนูุฏ ุงูุฎุฑูุฌ ุบูุฑ ุงููุชููุน.
- [๐ก] ุงุณุชุฎุฏู cluster ูุน worker_threads ุฅุฐุง ููุช ุจุญุงุฌุฉ ูุนุฒู ุฃูู ูุฐุงูุฑุฉ ูุดุชุฑูุฉ. 